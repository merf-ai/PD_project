{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'Main',\n  data() {\n    return {\n      profile: [],\n      tasks: [],\n      tokeno: '',\n      isGeneratedTasks: false,\n      processGenerate: '',\n      isEmail: '',\n      file: '',\n      isFileUploading: '',\n      fileUploading: ''\n    };\n  },\n  mounted() {\n    this.getTask(), this.isFileUpload();\n  },\n  methods: {\n    async isFileUpload() {\n      this.$store.commit('setIsLoading', true);\n      await axios.post('/users/student_decision/', {\n        headers: {\n          'Authorization': 'Token ' + this.$store.state.token\n        }\n      }).then(response => {\n        this.fileUploading = 'http://192.168.1.3:8000/test_generator' + response.data.filename;\n      }).catch(error => {\n        if (error.response) {\n          this.isFileUploading = error.response.data.message;\n        }\n        console.log(error);\n      });\n      this.$store.commit('setIsLoading', false);\n    },\n    submitFile() {\n      let formData = new FormData();\n      formData.append('decision', this.file);\n      axios.post('/test_generator/upload_decision/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(function () {\n        console.log('SUCCESS!!');\n        this.$router.push('/account');\n      }).catch(function () {\n        console.log('FAILURE!!');\n      });\n    },\n    handleFileUpload() {\n      this.file = this.$refs.file.files[0];\n    },\n    async getTask() {\n      this.$store.commit('setIsLoading', true);\n      await axios.post('/test_generator/show_test/', {\n        headers: {\n          'Authorization': 'Token ' + this.$store.state.token\n        }\n      }).then(response => {\n        this.tasks = response.data;\n        this.isGeneratedTasks = true;\n      }).catch(error => {\n        if (error.response) {\n          this.isEmail = error.response.data.detail;\n        }\n        console.log(error);\n        this.isGeneratedTasks = false;\n      });\n      this.$store.commit('setIsLoading', false);\n    },\n    async generateTask() {\n      this.$store.commit('setIsLoading', true);\n      this.processGenerate = 'Генерируется вариант';\n      await axios.post('/test_generator/generate/', {\n        headers: {\n          'Authorization': 'Token ' + this.$store.state.token\n        }\n      }).then(response => {\n        this.profile = response.data;\n        this.processGenerate = 'Вариант сгенерирован';\n        this.$router.push('/account');\n      }).catch(error => {\n        console.log(error);\n        this.processGenerate = 'Ошибка';\n      });\n      this.$store.commit('setIsLoading', false);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","profile","tasks","tokeno","isGeneratedTasks","processGenerate","isEmail","file","isFileUploading","fileUploading","mounted","getTask","isFileUpload","methods","$store","commit","post","headers","state","token","then","response","filename","catch","error","message","console","log","submitFile","formData","FormData","append","$router","push","handleFileUpload","$refs","files","detail","generateTask"],"sourceRoot":"","sources":["C:\\Users\\NOVAC\\Desktop\\GitHub Rep\\PD_project\\frontend\\src\\views\\Generate.vue"],"sourcesContent":["<template>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-avatar@latest/dist/avatar.min.css\" rel=\"stylesheet\">\r\n    <div class=\"Generate\">\r\n        <h1 class=\"title mb-3\">Генератор заданий</h1>\r\n        {{isFileUploading}}\r\n        \r\n        <div v-if=\"isEmail\">\r\n            {{ isEmail }}\r\n        </div>\r\n        \r\n        <div v-if=\"tasks.message === 'Извините для вас тест не сгенерирован!'\">\r\n            <p>На этой странице вы можете сгенерировать вариант</p>\r\n            <div class=\"btn-group mb-3\" role=\"group\" aria-label=\"Basic example\">\r\n                <button type=\"button\" @click=\"generateTask()\" class=\"btn btn-primary\">Сгенерировать вариант</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-if=\"tasks.message !== 'Извините для вас тест не сгенерирован!' && isEmail === ''\">\r\n            <p>Для вас уже доступен сгенерированный вариант</p>\r\n        </div>\r\n\r\n        <div v-if=\"tasks.message !== 'Извините для вас тест не сгенерирован!' && isEmail === ''\">\r\n            <div class=\"card mt-4\">\r\n                <div class=\"card-body\">\r\n                    <h3 class=\"card-title mb-3\">Отправка ответа</h3>\r\n                    <div v-if=\"fileUploading\">\r\n                        <div>Файл загружен</div>\r\n                        <a :href=\"fileUploading\">Решение</a>\r\n                    </div>\r\n                    <div class=\"input-group\">\r\n                        <input type=\"file\" class=\"form-control\" id=\"file\" ref=\"file\" v-on:change=\"handleFileUpload()\">\r\n                        <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"submitFile()\">\r\n                            Отправить ответ\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"card mt-4\">\r\n                <div class=\"card-body\">\r\n                    <h3 class=\"card-title\">Сгенерированный вариант</h3>\r\n                    <div v-for=\"task in tasks.data\">\r\n                        <div class=\"card mt-4\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-subtitle mb-2 text-muted\">Задание {{ task.task_number }}</h5>\r\n                                <ul class=\"list-group list-group-flush\">\r\n\r\n                                    <li class=\"list-group-item\">\r\n                                        <h5 class=\"card-title\">Необходимо вычислить</h5>\r\n                                        <div class=\"d-flex justify-content-center mt-5\">\r\n                                            <vue-mathjax :formula=\"'$$' + task.example + '$$'\"></vue-mathjax>\r\n                                        </div>\r\n                                    </li>\r\n                                    <!-- <li class=\"list-group-item\">\r\n                                    <h5 class=\"card-title\">Ответ</h5>\r\n                                    <div class=\"d-flex justify-content-center mt-5\">\r\n                                        <vue-mathjax :formula=\"'$$' + task.answer + '$$'\"></vue-mathjax>\r\n                                    </div>\r\n                                </li> -->\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n    name: 'Main',\r\n    data() {\r\n        return {\r\n            profile: [],\r\n            tasks: [],\r\n            tokeno: '',\r\n            isGeneratedTasks: false,\r\n            processGenerate: '',\r\n            isEmail: '',\r\n            file: '',\r\n            isFileUploading: '',\r\n            fileUploading: ''\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getTask(),\r\n        this.isFileUpload()\r\n    },\r\n    methods: {\r\n        async isFileUpload() {\r\n            this.$store.commit('setIsLoading', true)\r\n            await axios\r\n                .post('/users/student_decision/', {\r\n                    headers: { 'Authorization': 'Token ' + this.$store.state.token }\r\n                })\r\n                .then(response => {\r\n                    this.fileUploading = 'http://192.168.1.3:8000/test_generator' + response.data.filename\r\n                })\r\n                .catch(error => {\r\n                    if (error.response) {\r\n                        this.isFileUploading = error.response.data.message\r\n                    }\r\n                    console.log(error)\r\n                })\r\n            this.$store.commit('setIsLoading', false)\r\n        },\r\n\r\n        submitFile() {\r\n            let formData = new FormData();\r\n            formData.append('decision', this.file);\r\n            axios.post('/test_generator/upload_decision/',\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                }\r\n            ).then(function () {\r\n                console.log('SUCCESS!!');\r\n                this.$router.push('/account')\r\n            })\r\n                .catch(function () {\r\n                    console.log('FAILURE!!');\r\n                });\r\n        },\r\n        handleFileUpload() {\r\n            this.file = this.$refs.file.files[0];\r\n        },\r\n        async getTask() {\r\n            this.$store.commit('setIsLoading', true)\r\n            await axios\r\n                .post('/test_generator/show_test/', {\r\n                    headers: { 'Authorization': 'Token ' + this.$store.state.token }\r\n                })\r\n                .then(response => {\r\n                    this.tasks = response.data\r\n                    this.isGeneratedTasks = true\r\n                })\r\n                .catch(error => {\r\n                    if (error.response) {\r\n                        this.isEmail = error.response.data.detail\r\n                    }\r\n                    console.log(error)\r\n                    this.isGeneratedTasks = false\r\n                })\r\n            this.$store.commit('setIsLoading', false)\r\n        },\r\n        async generateTask() {\r\n            this.$store.commit('setIsLoading', true)\r\n            this.processGenerate = 'Генерируется вариант'\r\n\r\n            await axios\r\n                .post('/test_generator/generate/', {\r\n                    headers: { 'Authorization': 'Token ' + this.$store.state.token }\r\n                })\r\n                .then(response => {\r\n                    this.profile = response.data\r\n                    this.processGenerate = 'Вариант сгенерирован'\r\n                    this.$router.push('/account')\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    this.processGenerate = 'Ошибка'\r\n                })\r\n\r\n            this.$store.commit('setIsLoading', false)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}